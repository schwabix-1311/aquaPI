/*! UIkit 3.15.8 | https://www.getuikit.com | (c) 2014 - 2022 YOOtheme | MIT License */(function(n,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitfilter",["uikit-util"],m):(n=typeof globalThis<"u"?globalThis:n||self,n.UIkitFilter=m(n.UIkit.util))})(this,function(n){"use strict";function m(s){return A(s,"top","bottom")}function A(s,e,t){const o=[[]];for(const r of s){if(!n.isVisible(r))continue;let c=l(r);for(let a=o.length-1;a>=0;a--){const f=o[a];if(!f[0]){f.push(r);break}let d;if(f[0].offsetParent===r.offsetParent?d=l(f[0]):(c=l(r,!0),d=l(f[0],!0)),c[e]>=d[t]-1&&c[e]!==d[e]){o.push([r]);break}if(c[t]-1>d[e]||c[e]===d[e]){f.push(r);break}if(a===0){o.unshift([r]);break}}}return o}function l(s,e){e===void 0&&(e=!1);let{offsetTop:t,offsetLeft:o,offsetHeight:r,offsetWidth:c}=s;return e&&([t,o]=n.offsetPosition(s)),{top:t,left:o,bottom:t+r,right:o+c}}const y="uk-transition-leave",g="uk-transition-enter";function v(s,e,t,o){o===void 0&&(o=0);const r=u(e,!0),c={opacity:1},a={opacity:0},f=i=>()=>r===u(e)?i():Promise.reject(),d=f(async()=>{n.addClass(e,y),await Promise.all(I(e).map((i,h)=>new Promise(w=>setTimeout(()=>n.Transition.start(i,a,t/2,"ease").then(w),h*o)))),n.removeClass(e,y)}),p=f(async()=>{const i=n.height(e);n.addClass(e,g),s(),n.css(n.children(e),{opacity:0}),await L();const h=n.children(e),w=n.height(e);n.css(e,"alignContent","flex-start"),n.height(e,i);const C=I(e);n.css(h,a);const q=C.map(async(G,J)=>{await z(J*o),await n.Transition.start(G,c,t/2,"ease")});i!==w&&q.push(n.Transition.start(e,{height:w},t/2+C.length*o,"ease")),await Promise.all(q).then(()=>{n.removeClass(e,g),r===u(e)&&(n.css(e,{height:"",alignContent:""}),n.css(h,{opacity:""}),delete e.dataset.transition)})});return n.hasClass(e,y)?T(e).then(p):n.hasClass(e,g)?T(e).then(d).then(p):d().then(p)}function u(s,e){return e&&(s.dataset.transition=1+u(s)),n.toNumber(s.dataset.transition)||0}function T(s){return Promise.all(n.children(s).filter(n.Transition.inProgress).map(e=>new Promise(t=>n.once(e,"transitionend transitioncanceled",t))))}function I(s){return m(n.children(s)).reduce((e,t)=>e.concat(n.sortBy(t.filter(o=>n.isInView(o)),"offsetLeft")),[])}function L(){return new Promise(s=>requestAnimationFrame(s))}function z(s){return new Promise(e=>setTimeout(e,s))}async function N(s,e,t){await b();let o=n.children(e);const r=o.map(i=>F(i,!0)),c=n.css(e,["height","padding"]);o.concat(e).forEach(n.Transition.cancel),S(e),s(),o=o.concat(n.children(e).filter(i=>!n.includes(o,i))),await B(),n.fastdom.flush();const a=n.css(e,["height","padding"]),[f,d]=V(e,o,r);o.forEach((i,h)=>d[h]&&n.css(i,d[h])),n.css(e,{display:"block",...c}),await b();const p=o.map((i,h)=>n.parent(i)===e&&n.Transition.start(i,f[h],t,"ease")).concat(n.Transition.start(e,a,t,"ease"));await Promise.all(p).then(()=>{o.forEach((i,h)=>n.parent(i)===e&&n.css(i,"display",f[h].opacity===0?"none":"")),S(e)},n.noop)}function F(s,e){const t=n.css(s,"zIndex");return n.isVisible(s)?{display:"",opacity:e?n.css(s,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:t==="auto"?n.index(s):t,...$(s)}:!1}function V(s,e,t){const o=e.map((c,a)=>n.parent(c)&&a in t?t[a]?n.isVisible(c)?$(c):{opacity:0}:{opacity:n.isVisible(c)?1:0}:!1),r=o.map((c,a)=>{const f=n.parent(e[a])===s&&(t[a]||F(e[a]));if(!f)return!1;if(!c)delete f.opacity;else if(!("opacity"in c)){const{opacity:d}=f;d%1?c.opacity=1:delete f.opacity}return f});return[o,r]}function S(s){n.css(s.children,{height:"",left:"",opacity:"",pointerEvents:"",position:"",top:"",marginTop:"",marginLeft:"",transform:"",width:"",zIndex:""}),n.css(s,{height:"",display:"",padding:""})}function $(s){const{height:e,width:t}=n.offset(s),{top:o,left:r}=n.position(s),{marginLeft:c,marginTop:a}=n.css(s,["marginTop","marginLeft"]);return{top:o,left:r,height:e,width:t,marginLeft:c,marginTop:a,transform:""}}function b(){return new Promise(s=>requestAnimationFrame(s))}function B(){const s=document.createTextNode(""),e=new Promise(t=>n.observeMutation(s,(o,r)=>{t(),r.disconnect()},{characterData:!0}));return s.data=1,e}var O={props:{duration:Number,animation:Boolean},data:{duration:150,animation:"slide"},methods:{animate(s,e){e===void 0&&(e=this.$el);const t=this.animation;return(t==="fade"?v:t==="delayed-fade"?function(){for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return v(...c,40)}:t?N:()=>(s(),Promise.resolve()))(s,e,this.duration).then(()=>this.$update(e,"resize"),n.noop)}}},P={mixins:[O],args:"target",props:{target:Boolean,selActive:Boolean},data:{target:null,selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",duration:250},computed:{toggles:{get(s,e){let{attrItem:t}=s;return n.$$("["+t+"],[data-"+t+"]",e)},watch(){if(this.updateState(),this.selActive!==!1){const s=n.$$(this.selActive,this.$el);this.toggles.forEach(e=>n.toggleClass(e,this.cls,n.includes(s,e)))}},immediate:!0},children:{get(s,e){let{target:t}=s;return n.$$(t+" > *",e)},watch(s,e){e&&!j(s,e)&&this.updateState()},immediate:!0}},events:[{name:"click",delegate(){return"["+this.attrItem+"],[data-"+this.attrItem+"]"},handler(s){s.preventDefault(),this.apply(s.current)}}],methods:{apply(s){const e=this.getState(),t=E(s,this.attrItem,this.getState());D(e,t)||this.setState(t)},getState(){return this.toggles.filter(s=>n.hasClass(s,this.cls)).reduce((s,e)=>E(e,this.attrItem,s),{filter:{"":""},sort:[]})},async setState(s,e){e===void 0&&(e=!0),s={filter:{"":""},sort:[],...s},n.trigger(this.$el,"beforeFilter",[this,s]),this.toggles.forEach(t=>n.toggleClass(t,this.cls,!!M(t,this.attrItem,s))),await Promise.all(n.$$(this.target,this.$el).map(t=>{const o=()=>{H(s,t,n.children(t)),this.$update(this.$el)};return e?this.animate(o,t):o()})),n.trigger(this.$el,"afterFilter",[this])},updateState(){n.fastdom.write(()=>this.setState(this.getState(),!1))}}};function x(s,e){return n.parseOptions(n.data(s,e),["filter"])}function D(s,e){return["filter","sort"].every(t=>n.isEqual(s[t],e[t]))}function H(s,e,t){const o=W(s);t.forEach(a=>n.css(a,"display",o&&!n.matches(a,o)?"none":""));const[r,c]=s.sort;if(r){const a=R(t,r,c);n.isEqual(a,t)||n.append(e,a)}}function E(s,e,t){const{filter:o,group:r,sort:c,order:a="asc"}=x(s,e);return(o||n.isUndefined(c))&&(r?o?(delete t.filter[""],t.filter[r]=o):(delete t.filter[r],(n.isEmpty(t.filter)||""in t.filter)&&(t.filter={"":o||""})):t.filter={"":o||""}),n.isUndefined(c)||(t.sort=[c,a]),t}function M(s,e,t){let{filter:o={"":""},sort:[r,c]}=t;const{filter:a="",group:f="",sort:d,order:p="asc"}=x(s,e);return n.isUndefined(d)?f in o&&a===o[f]||!a&&f&&!(f in o)&&!o[""]:r===d&&c===p}function j(s,e){return s.length===e.length&&s.every(t=>e.includes(t))}function W(s){let{filter:e}=s,t="";return n.each(e,o=>t+=o||""),t}function R(s,e,t){return[...s].sort((o,r)=>n.data(o,e).localeCompare(n.data(r,e),void 0,{numeric:!0})*(t==="asc"||-1))}return typeof window<"u"&&window.UIkit&&window.UIkit.component("filter",P),P});
