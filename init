#!/usr/bin/bash

# Sorry for the inconvenience, but since this script has to be
# sourced it can't determine its own home (AFAIK)
MyHome=~/aquaPI

if [[ `basename $0` = "init" ]]
then
  echo "ERROR: this script must be sourced: '. ${MyHome}/init'"
  fi

if [[ ! -d ${MyHome}/venv ]]
then
  echo "First time init of aquaPi development env."
  read -p "CR to continue / Ctrl-C" dummy
  cd ${MyHome}
  . ./venv/bin/activate
  pip install Flask sseclient
  echo "Created a virtual Python environment and installed"
  echo "required modules into it."
else
  echo "Activate aquaPi development env."
  cd ${MyHome}
  . ./venv/bin/activate
  echo "Activated existing virtual Py environment."
  fi

echo "To run the development server, use './run'"
echo "The debug server is 'http://localhost:5000'"
echo "'deactivate' will return to 'normal' - whatever that is ;-)"
